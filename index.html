<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merci</title>

    <!-- Ajouter un emoji directement comme favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16'><text x='0' y='14' font-size='14' font-family='Arial' fill='black'>ðŸŒ¸</text></svg>">

    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- ArriÃ¨re-plan animÃ© uniquement pour la section bienvenue -->
    <div class="background">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <!-- Ajoute tes autres spans pour l'animation -->
    </div>

    <!-- Section de bienvenue -->
    <section id="welcome">
        <div class="message-3d">Bienvenue LÃ¢lia</div>
        <div class="click-indicator" onclick="scrollToVideo()">Click</div> <!-- Texte "Click" clignotant -->
        <!-- Triangles Ã  gauche et Ã  droite du texte -->
        <div class="scroll-indicator" onclick="scrollToVideo()">â†“</div>
    </section>


    <div class="keypad-section" id="keypad-section">
        <div class="keypad">
            <input type="password" id="code-input" maxlength="5" placeholder="Entrez le code" />
            <div class="keypad-buttons">
                <button onclick="enterKey(1)">1</button>
                <button onclick="enterKey(2)">2</button>
                <button onclick="enterKey(3)">3</button>
                <button onclick="enterKey(4)">4</button>
                <button onclick="enterKey(5)">5</button>
                <button onclick="enterKey(6)">6</button>
                <button onclick="enterKey(7)">7</button>
                <button onclick="enterKey(8)">8</button>
                <button onclick="enterKey(9)">9</button>
                <button onclick="enterKey(0)">0</button>
                <button onclick="clearInput()">Clear</button>
                <button class="enter-button" onclick="submitCode()">Enter</button>
            </div>
        </div>
    </div>
    


    <!-- Section vidÃ©o avec fond noir -->
    <div class="video-section" id="video">
        <video controls width="100%" id="video-player">
            Votre navigateur ne supporte pas la vidÃ©o HTML5.
        </video>
    </div>

    <script>
        let codeEntered = "";

        async function getVideoUrl(code) {
            const response = await fetch('https://remerciment-back-phi.vercel.app/api/verify', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ code }),
            });

            const data = await response.json();

            if (data.success) {
                const videoUrl = data.videoUrl;
                const videoPlayer = document.getElementById("video-player");
                videoPlayer.src = videoUrl; // Met Ã  jour la source de la vidÃ©o avec l'URL reÃ§ue
                hideKeypadAndShowVideo();
            } else {
                alert("Code invalide.");
                clearInput();
            }
        }

        function enterKey(number) {
            codeEntered += number;
            document.getElementById("code-input").value = codeEntered;
            if (codeEntered.length === 6) {
                getVideoUrl(codeEntered); // Call to backend to verify code
            }
        }

        function clearInput() {
            codeEntered = "";
            document.getElementById("code-input").value = "";
        }

        function showKeypad() {
            document.getElementById("keypad-section").style.display = "block";
        }

        function hideKeypadAndShowVideo() {
            document.getElementById("keypad-section").style.display = "none";
            document.getElementById("video-section").style.display = "block";
            scrollToVideo();
        }

        function submitCode() {
            if (codeEntered.length === 5) {
                getVideoUrl(codeEntered); // Call to backend to verify code
            } else {
                alert("Le code doit contenir 5 chiffres.");
            }
        }


        function scrollToVideo() {
            const videoSection = document.getElementById("video-section");
            videoSection.scrollIntoView({ behavior: "smooth" });
            const video = document.querySelector('video');
            video.play();
        }

        document.querySelector('.scroll-indicator').addEventListener('click', scrollToVideo);

        
    </script>


    <script src="script.js"></script>
</body>
</html>

